<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KallistiOS: SD Card</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KallistiOS<span id="projectnumber">&#160;git master</span>
   </div>
   <div id="projectbrief">Independent SDK for the Sega Dreamcast</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__vfs__sd.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">SD Card<div class="ingroups"><a class="el" href="group__vfs.html">Filesystem</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>VFS driver for accessing SD cards over the SCIF or SCI port  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd_8h.html">sd.h</a></td></tr>
<tr class="memdesc:sd_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block-level access to an SD card attached to the SCI or SCIF port. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsd__init__params__t.html">sd_init_params_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SD card initialization parameters.  <a href="structsd__init__params__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaef5079cbc7014c332608bbf442ed8aa9" id="r_gaef5079cbc7014c332608bbf442ed8aa9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaef5079cbc7014c332608bbf442ed8aa9">sd_interface_t</a> { <a class="el" href="#ggaef5079cbc7014c332608bbf442ed8aa9a755986065fb55f7f9f97fa1361f3370a">SD_IF_SCIF</a> = 0
, <a class="el" href="#ggaef5079cbc7014c332608bbf442ed8aa9afcc317684fb9fc35b02625e3e3b85ca1">SD_IF_SCI</a> = 1
 }</td></tr>
<tr class="memdesc:gaef5079cbc7014c332608bbf442ed8aa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">SD card interface type.  <a href="#gaef5079cbc7014c332608bbf442ed8aa9">More...</a><br /></td></tr>
<tr class="separator:gaef5079cbc7014c332608bbf442ed8aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga702d73eee91009fc60a68f5cdf5332df" id="r_ga702d73eee91009fc60a68f5cdf5332df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga702d73eee91009fc60a68f5cdf5332df">sd_crc7</a> (const <a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *data, int size, <a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> crc)</td></tr>
<tr class="memdesc:ga702d73eee91009fc60a68f5cdf5332df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate a SD/MMC-style CRC over a block of data.  <br /></td></tr>
<tr class="separator:ga702d73eee91009fc60a68f5cdf5332df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8228bbbb1e7fa40052bbf9bdfb9672b5" id="r_ga8228bbbb1e7fa40052bbf9bdfb9672b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8228bbbb1e7fa40052bbf9bdfb9672b5">sd_init_ex</a> (const <a class="el" href="structsd__init__params__t.html">sd_init_params_t</a> *params)</td></tr>
<tr class="memdesc:ga8228bbbb1e7fa40052bbf9bdfb9672b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the SD card with extended parameters.  <br /></td></tr>
<tr class="separator:ga8228bbbb1e7fa40052bbf9bdfb9672b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51531c835e2323129f557b6086f4d7bd" id="r_ga51531c835e2323129f557b6086f4d7bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga51531c835e2323129f557b6086f4d7bd">sd_init</a> (void)</td></tr>
<tr class="memdesc:ga51531c835e2323129f557b6086f4d7bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the SD card for use.  <br /></td></tr>
<tr class="separator:ga51531c835e2323129f557b6086f4d7bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9757bfb5f1010c3d53fbf116c233f7f1" id="r_ga9757bfb5f1010c3d53fbf116c233f7f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9757bfb5f1010c3d53fbf116c233f7f1">sd_shutdown</a> (void)</td></tr>
<tr class="memdesc:ga9757bfb5f1010c3d53fbf116c233f7f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shut down SD card support.  <br /></td></tr>
<tr class="separator:ga9757bfb5f1010c3d53fbf116c233f7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89e03b88dd86d19352e62a6794ff423b" id="r_ga89e03b88dd86d19352e62a6794ff423b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga89e03b88dd86d19352e62a6794ff423b">sd_read_blocks</a> (<a class="el" href="group__system__types.html#ga4b435a49c74bb91f284f075e63416cb6">uint32</a> block, size_t count, <a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *buf)</td></tr>
<tr class="memdesc:ga89e03b88dd86d19352e62a6794ff423b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read one or more blocks from the SD card.  <br /></td></tr>
<tr class="separator:ga89e03b88dd86d19352e62a6794ff423b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0bfb1cd45947d5f16707a231e2f1bb05" id="r_ga0bfb1cd45947d5f16707a231e2f1bb05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0bfb1cd45947d5f16707a231e2f1bb05">sd_write_blocks</a> (<a class="el" href="group__system__types.html#ga4b435a49c74bb91f284f075e63416cb6">uint32</a> block, size_t count, const <a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *buf)</td></tr>
<tr class="memdesc:ga0bfb1cd45947d5f16707a231e2f1bb05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one or more blocks to the SD card.  <br /></td></tr>
<tr class="separator:ga0bfb1cd45947d5f16707a231e2f1bb05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga455fe9cb80944537f2b8b4572f75a718" id="r_ga455fe9cb80944537f2b8b4572f75a718"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__system__types.html#ga29940ae63ec06c9998bba873e25407ad">uint64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga455fe9cb80944537f2b8b4572f75a718">sd_get_size</a> (void)</td></tr>
<tr class="memdesc:ga455fe9cb80944537f2b8b4572f75a718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the size of the SD card.  <br /></td></tr>
<tr class="separator:ga455fe9cb80944537f2b8b4572f75a718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4d6b3902d95916b8c6e295984c590c8" id="r_gae4d6b3902d95916b8c6e295984c590c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae4d6b3902d95916b8c6e295984c590c8">sd_blockdev_for_partition</a> (int partition, <a class="el" href="structkos__blockdev__t.html">kos_blockdev_t</a> *rv, <a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *partition_type)</td></tr>
<tr class="memdesc:gae4d6b3902d95916b8c6e295984c590c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a block device for a given partition on the SD card.  <br /></td></tr>
<tr class="separator:gae4d6b3902d95916b8c6e295984c590c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a87832e0886abc3a871a7e9708cab4a" id="r_ga4a87832e0886abc3a871a7e9708cab4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4a87832e0886abc3a871a7e9708cab4a">sd_blockdev_for_device</a> (<a class="el" href="structkos__blockdev__t.html">kos_blockdev_t</a> *rv)</td></tr>
<tr class="memdesc:ga4a87832e0886abc3a871a7e9708cab4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a block device for the SD card.  <br /></td></tr>
<tr class="separator:ga4a87832e0886abc3a871a7e9708cab4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>VFS driver for accessing SD cards over the SCIF or SCI port </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaef5079cbc7014c332608bbf442ed8aa9" name="gaef5079cbc7014c332608bbf442ed8aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef5079cbc7014c332608bbf442ed8aa9">&#9670;&#160;</a></span>sd_interface_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gaef5079cbc7014c332608bbf442ed8aa9">sd_interface_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SD card interface type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaef5079cbc7014c332608bbf442ed8aa9a755986065fb55f7f9f97fa1361f3370a" name="ggaef5079cbc7014c332608bbf442ed8aa9a755986065fb55f7f9f97fa1361f3370a"></a>SD_IF_SCIF&#160;</td><td class="fielddoc"><p>Use SCIF interface. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaef5079cbc7014c332608bbf442ed8aa9afcc317684fb9fc35b02625e3e3b85ca1" name="ggaef5079cbc7014c332608bbf442ed8aa9afcc317684fb9fc35b02625e3e3b85ca1"></a>SD_IF_SCI&#160;</td><td class="fielddoc"><p>Use SCI interface. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4a87832e0886abc3a871a7e9708cab4a" name="ga4a87832e0886abc3a871a7e9708cab4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a87832e0886abc3a871a7e9708cab4a">&#9670;&#160;</a></span>sd_blockdev_for_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_blockdev_for_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkos__blockdev__t.html">kos_blockdev_t</a> *</td>          <td class="paramname"><span class="paramname"><em>rv</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a block device for the SD card. </p>
<p>This function creates a block device descriptor for the attached SD card. This block device is used to interface with various filesystems on the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rv</td><td>Used to return the block device. Must be non-NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-1</td><td>On error, errno will be set as appropriate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>ENXIO</em> - SD card support was not initialized <em>EFAULT</em> - rv was NULL <em>ENOMEM</em> - out of memory </dd></dl>

</div>
</div>
<a id="gae4d6b3902d95916b8c6e295984c590c8" name="gae4d6b3902d95916b8c6e295984c590c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4d6b3902d95916b8c6e295984c590c8">&#9670;&#160;</a></span>sd_blockdev_for_partition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_blockdev_for_partition </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>partition</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structkos__blockdev__t.html">kos_blockdev_t</a> *</td>          <td class="paramname"><span class="paramname"><em>rv</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *</td>          <td class="paramname"><span class="paramname"><em>partition_type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a block device for a given partition on the SD card. </p>
<p>This function creates a block device descriptor for the given partition on the attached SD card. This block device is used to interface with various filesystems on the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>The partition number (0-3) to use. </td></tr>
    <tr><td class="paramname">rv</td><td>Used to return the block device. Must be non-NULL. </td></tr>
    <tr><td class="paramname">partition_type</td><td>Used to return the partition type. Must be non-NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-1</td><td>On error, errno will be set as appropriate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>ENXIO</em> - SD card support was not initialized <br  />
<em>EIO</em> - an I/O error occurred in reading data <br  />
<em>EINVAL</em> - invalid partition number was given <br  />
<em>EFAULT</em> - rv or partition_type was NULL <br  />
<em>ENOENT</em> - no MBR found <br  />
<em>ENOENT</em> - no partition at the specified position <br  />
<em>ENOMEM</em> - out of memory</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This interface currently only supports MBR-formatted SD cards. There is currently no support for GPT partition tables. </dd></dl>

</div>
</div>
<a id="ga702d73eee91009fc60a68f5cdf5332df" name="ga702d73eee91009fc60a68f5cdf5332df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga702d73eee91009fc60a68f5cdf5332df">&#9670;&#160;</a></span>sd_crc7()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> sd_crc7 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a></td>          <td class="paramname"><span class="paramname"><em>crc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate a SD/MMC-style CRC over a block of data. </p>
<p>This function calculates a 7-bit CRC over a given block of data. The polynomial of this CRC is x^7 + x^3 + 1. The CRC is shifted into the upper 7 bits of the return value, so bit 0 should always be 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The block of data to calculate the CRC over. </td></tr>
    <tr><td class="paramname">size</td><td>The number of bytes in the block of data. </td></tr>
    <tr><td class="paramname">crc</td><td>The starting value of the calculation. If you're passing in a full block, this will probably be 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated CRC. </dd></dl>

</div>
</div>
<a id="ga455fe9cb80944537f2b8b4572f75a718" name="ga455fe9cb80944537f2b8b4572f75a718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga455fe9cb80944537f2b8b4572f75a718">&#9670;&#160;</a></span>sd_get_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__system__types.html#ga29940ae63ec06c9998bba873e25407ad">uint64</a> sd_get_size </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the size of the SD card. </p>
<p>This function reads the size of the SD card from the card's CSD register. This is the raw size of the card, not its formatted capacity. To get the number of blocks from this, divide by 512.</p>
<dl class="section return"><dt>Returns</dt><dd>On success, the raw size of the SD card in bytes. On error, (uint64)-1.</dd></dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>EIO</em> - an I/O error occurred in reading data <br  />
<em>ENXIO</em> - SD card support was not initialized </dd></dl>

</div>
</div>
<a id="ga51531c835e2323129f557b6086f4d7bd" name="ga51531c835e2323129f557b6086f4d7bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51531c835e2323129f557b6086f4d7bd">&#9670;&#160;</a></span>sd_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the SD card for use. </p>
<p>This function initializes the SD card for first use using default parameters (SCIF interface and CRC checking enabled).</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-1</td><td>On failure. This could indicate any number of problems, but probably means that no SD card was detected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8228bbbb1e7fa40052bbf9bdfb9672b5" name="ga8228bbbb1e7fa40052bbf9bdfb9672b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8228bbbb1e7fa40052bbf9bdfb9672b5">&#9670;&#160;</a></span>sd_init_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_init_ex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsd__init__params__t.html">sd_init_params_t</a> *</td>          <td class="paramname"><span class="paramname"><em>params</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the SD card with extended parameters. </p>
<p>This function initializes the SD card with specified parameters. This includes all steps of the basic initialization sequence for SPI mode, as documented in the SD card spec and at <a href="http://elm-chan.org/docs/mmc/mmc_e.html">http://elm-chan.org/docs/mmc/mmc_e.html</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Pointer to initialization parameters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-1</td><td>On failure. This could indicate any number of problems, but probably means that no SD card was detected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga89e03b88dd86d19352e62a6794ff423b" name="ga89e03b88dd86d19352e62a6794ff423b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89e03b88dd86d19352e62a6794ff423b">&#9670;&#160;</a></span>sd_read_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_read_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__system__types.html#ga4b435a49c74bb91f284f075e63416cb6">uint32</a></td>          <td class="paramname"><span class="paramname"><em>block</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read one or more blocks from the SD card. </p>
<p>This function reads the specified number of blocks from the SD card from the beginning block specified into the buffer passed in. It is your responsibility to allocate the buffer properly for the number of bytes that is to be read (512 * the number of blocks requested).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>The starting block number to read from. </td></tr>
    <tr><td class="paramname">count</td><td>The number of 512 byte blocks of data to read. </td></tr>
    <tr><td class="paramname">buf</td><td>The buffer to read into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-1</td><td>On error, errno will be set as appropriate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>EIO</em> - an I/O error occurred in reading data <br  />
<em>ENXIO</em> - SD card support was not initialized </dd></dl>

</div>
</div>
<a id="ga9757bfb5f1010c3d53fbf116c233f7f1" name="ga9757bfb5f1010c3d53fbf116c233f7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9757bfb5f1010c3d53fbf116c233f7f1">&#9670;&#160;</a></span>sd_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_shutdown </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shut down SD card support. </p>
<p>This function shuts down SD card support, and cleans up anything that the <a class="el" href="#ga51531c835e2323129f557b6086f4d7bd" title="Initialize the SD card for use.">sd_init()</a> function set up.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-1</td><td>On failure. The only currently defined error is if the card was never initialized to start with. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0bfb1cd45947d5f16707a231e2f1bb05" name="ga0bfb1cd45947d5f16707a231e2f1bb05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0bfb1cd45947d5f16707a231e2f1bb05">&#9670;&#160;</a></span>sd_write_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_write_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__system__types.html#ga4b435a49c74bb91f284f075e63416cb6">uint32</a></td>          <td class="paramname"><span class="paramname"><em>block</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__system__types.html#gadde6aaee8457bee49c2a92621fe22b79">uint8</a> *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one or more blocks to the SD card. </p>
<p>This function writes the specified number of blocks to the SD card at the beginning block specified from the buffer passed in. Each block is 512 bytes in length, and you must write at least one block at a time. You cannot write partial blocks.</p>
<p>If this function returns an error, you have quite possibly corrupted something on the card or have a damaged card in general (unless errno is ENXIO).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>The starting block number to write to. </td></tr>
    <tr><td class="paramname">count</td><td>The number of 512 byte blocks of data to write. </td></tr>
    <tr><td class="paramname">buf</td><td>The buffer to write from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-1</td><td>On error, errno will be set as appropriate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>EIO</em> - an I/O error occurred in reading data <br  />
<em>ENXIO</em> - SD card support was not initialized </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
