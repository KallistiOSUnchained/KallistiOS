<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KallistiOS: GPROF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KallistiOS<span id="projectnumber">&#160;git master</span>
   </div>
   <div id="projectbrief">Independent SDK for the Sega Dreamcast</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__debugging__gprof.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">GPROF<div class="ingroups"><a class="el" href="group__debugging.html">Debugging</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>GPROF utilities  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa5cb29560f032ce613e93e32bcdd407e" id="r_gaa5cb29560f032ce613e93e32bcdd407e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa5cb29560f032ce613e93e32bcdd407e">GPROF_TRAPA_CODE</a>&#160;&#160;&#160;33</td></tr>
<tr class="memdesc:gaa5cb29560f032ce613e93e32bcdd407e"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPROF Trapa Code.  <br /></td></tr>
<tr class="separator:gaa5cb29560f032ce613e93e32bcdd407e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga30f01de92f05ca2638fcdd7a60d6ab14" id="r_ga30f01de92f05ca2638fcdd7a60d6ab14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga30f01de92f05ca2638fcdd7a60d6ab14">monstartup</a> (uintptr_t lowpc, uintptr_t highpc)</td></tr>
<tr class="memdesc:ga30f01de92f05ca2638fcdd7a60d6ab14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start gprof profiling for a specified address range.  <br /></td></tr>
<tr class="separator:ga30f01de92f05ca2638fcdd7a60d6ab14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c4a4e1a4685b82edd651d2e33494798" id="r_ga5c4a4e1a4685b82edd651d2e33494798"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5c4a4e1a4685b82edd651d2e33494798">moncontrol</a> (bool enable)</td></tr>
<tr class="memdesc:ga5c4a4e1a4685b82edd651d2e33494798"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart or stop gprof profiling.  <br /></td></tr>
<tr class="separator:ga5c4a4e1a4685b82edd651d2e33494798"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>GPROF utilities </p>
<p>This file provides utilities for profiling applications using gprof. Gprof is a profiling tool that allows you to analyze where your program spent its time and which functions called which other functions during execution. This can help you identify performance bottlenecks and optimize your code.</p>
<p>Profiling Steps:</p>
<ol type="1">
<li><p class="startli">Compile your program with profiling flags:</p>
<p class="startli">Use the following flags: </p><div class="fragment"><div class="line">CFLAGS = -pg -fno-omit-frame-pointer -fno-inline</div>
</div><!-- fragment --><p> These flags enable profiling and prevent function inlining to ensure accurate profiling data. When you use the -pg flag, the GCC compiler inserts trapa #33 instructions at the beginning of each function into your build.</p>
</li>
<li><p class="startli">Running your program to create gmon.out:</p>
<p class="startli">Execute your program normally to completion using dcload-ip or dcload-serial. This will generate a file named <code>gmon.out</code> in the current directory, which contains the profiling data.</p>
</li>
<li><p class="startli">Running gprof:</p>
<p class="startli">Use the following command to analyze the profiling data: </p><div class="fragment"><div class="line">$(KOS_GPROF) $(TARGET) gmon.out &gt; gprof_output.txt</div>
</div><!-- fragment --><p> Replace <code>$(TARGET)</code> with the name of your compiled program. This command will generate a human-readable report in <code>gprof_output.txt</code>.</p>
</li>
<li><p class="startli">Visualizing profiling data with gprof2dot:</p>
<p class="startli">To create a graphical representation of the profiling data, use the <code>gprof2dot</code> tool: </p><div class="fragment"><div class="line">gprof2dot gprof_output.txt &gt; graph.dot</div>
</div><!-- fragment --><p> This converts the <code>gprof</code> output into a DOT format file, which can be used to generate various types of graphs.</p>
</li>
<li><p class="startli">Generating an image from the DOT file:</p>
<p class="startli">Use the <code>dot</code> command from Graphviz to create a SVG image from the DOT file: </p><div class="fragment"><div class="line">dot -Tsvg graph.dot -o graph.svg</div>
</div><!-- fragment --><p> This command will generate a SVG image (<code>graph.svg</code>) that visually represents the profiling data.</p>
</li>
</ol>
<p>By following these steps, you can effectively profile your program and identify performance bottlenecks for optimization.</p>
<dl class="section author"><dt>Author</dt><dd>Andy Barajas </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaa5cb29560f032ce613e93e32bcdd407e" name="gaa5cb29560f032ce613e93e32bcdd407e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa5cb29560f032ce613e93e32bcdd407e">&#9670;&#160;</a></span>GPROF_TRAPA_CODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPROF_TRAPA_CODE&#160;&#160;&#160;33</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPROF Trapa Code. </p>
<p>GCC generates this pattern before each profiled function when you compile your project with the -pg flag:</p>
<p>trapa #33 &mdash; This is a 2-byte instruction nop &mdash; This is a 2-byte no-op placeholder label &mdash; This is a 4-byte LABELNO </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga5c4a4e1a4685b82edd651d2e33494798" name="ga5c4a4e1a4685b82edd651d2e33494798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c4a4e1a4685b82edd651d2e33494798">&#9670;&#160;</a></span>moncontrol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moncontrol </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enable</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restart or stop gprof profiling. </p>
<p>This function restarts or stops gprof profiling. It does NOT start gprof profiling initially, as gprof profiling starts before the program enters the main function. You can use this function to stop profiling and then restart it later when you reach the section of code you want to profile.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>A boolean value to restart (true) or stop (false) gprof profiling. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga30f01de92f05ca2638fcdd7a60d6ab14" name="ga30f01de92f05ca2638fcdd7a60d6ab14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30f01de92f05ca2638fcdd7a60d6ab14">&#9670;&#160;</a></span>monstartup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void monstartup </td>
          <td>(</td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>lowpc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t</td>          <td class="paramname"><span class="paramname"><em>highpc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start gprof profiling for a specified address range. </p>
<p>This function is intended for programs not linked with the &lsquo;-pg&rsquo; linker switch. If &lsquo;-pg&rsquo; was used during linking, monstartup is automatically called by the startup code with arguments covering the entire range of executable addresses, from the program's entry point to the highest code segment address. Using this method to initialize gprof will only generate histogram profiling data, without producing a call graph. Profiling starts immediately after calling this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lowpc</td><td>The lower bound of the address range to profile. </td></tr>
    <tr><td class="paramname">highpc</td><td>The upper bound of the address range to profile. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
