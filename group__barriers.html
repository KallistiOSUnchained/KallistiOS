<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KallistiOS: Barriers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KallistiOS<span id="projectnumber">&#160;git master</span>
   </div>
   <div id="projectbrief">Independent SDK for the Sega Dreamcast</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__barriers.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Barriers<div class="ingroups"><a class="el" href="group__threading.html">Threading</a> &raquo; <a class="el" href="group__kthreads.html">Kernel</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>KOS barrier API for kernel threads  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="barrier_8h.html">barrier.h</a></td></tr>
<tr class="memdesc:barrier_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread barriers. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionthd__barrier__t.html">thd_barrier_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread barrier type.  <a href="unionthd__barrier__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga27de07b620d6807a25b6f88e1f0174dc" id="r_ga27de07b620d6807a25b6f88e1f0174dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga27de07b620d6807a25b6f88e1f0174dc">THD_BARRIER_SERIAL_THREAD</a>&#160;&#160;&#160;0x7fffffff</td></tr>
<tr class="memdesc:ga27de07b620d6807a25b6f88e1f0174dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant returned to one thread from pthread_barrier_wait().  <br /></td></tr>
<tr class="separator:ga27de07b620d6807a25b6f88e1f0174dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae58e5739871cecf396064a8a586f07e8" id="r_gae58e5739871cecf396064a8a586f07e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae58e5739871cecf396064a8a586f07e8">THD_BARRIER_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:gae58e5739871cecf396064a8a586f07e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of a thread barrier, in bytes.  <br /></td></tr>
<tr class="separator:gae58e5739871cecf396064a8a586f07e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9f609418ef571d918feab5d8b22fdaee" id="r_ga9f609418ef571d918feab5d8b22fdaee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9f609418ef571d918feab5d8b22fdaee">thd_barrier_init</a> (<a class="el" href="unionthd__barrier__t.html">thd_barrier_t</a> *<a class="el" href="group__system__compat.html#ga378ac21329d33f561f90265eef89f564">__RESTRICT</a> barrier, const void *<a class="el" href="group__system__compat.html#ga378ac21329d33f561f90265eef89f564">__RESTRICT</a> attr, unsigned count)</td></tr>
<tr class="memdesc:ga9f609418ef571d918feab5d8b22fdaee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a thread barrier.  <br /></td></tr>
<tr class="separator:ga9f609418ef571d918feab5d8b22fdaee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1203e770e99f5d55ed2baf612e6f20c3" id="r_ga1203e770e99f5d55ed2baf612e6f20c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1203e770e99f5d55ed2baf612e6f20c3">thd_barrier_destroy</a> (<a class="el" href="unionthd__barrier__t.html">thd_barrier_t</a> *barrier)</td></tr>
<tr class="memdesc:ga1203e770e99f5d55ed2baf612e6f20c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a thread barrier.  <br /></td></tr>
<tr class="separator:ga1203e770e99f5d55ed2baf612e6f20c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79ab8ff77d1f4155cb30188c11e8758c" id="r_ga79ab8ff77d1f4155cb30188c11e8758c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga79ab8ff77d1f4155cb30188c11e8758c">thd_barrier_wait</a> (<a class="el" href="unionthd__barrier__t.html">thd_barrier_t</a> *barrier)</td></tr>
<tr class="memdesc:ga79ab8ff77d1f4155cb30188c11e8758c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait on a thread barrier.  <br /></td></tr>
<tr class="separator:ga79ab8ff77d1f4155cb30188c11e8758c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>KOS barrier API for kernel threads </p>
<p>Barriers are a type of synchronization method which halt execution for group of threads until a certain number of them have reached the barrier. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga27de07b620d6807a25b6f88e1f0174dc" name="ga27de07b620d6807a25b6f88e1f0174dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga27de07b620d6807a25b6f88e1f0174dc">&#9670;&#160;</a></span>THD_BARRIER_SERIAL_THREAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THD_BARRIER_SERIAL_THREAD&#160;&#160;&#160;0x7fffffff</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant returned to one thread from pthread_barrier_wait(). </p>
<p>A single (unspecified) thread will be returned this value after successfully waiting on a barrier, with all other threads being returned a 0. This is useful for selecting one thread to perform any cleanup work associated with the barrier (or other serial work that must be performed). </p>

</div>
</div>
<a id="gae58e5739871cecf396064a8a586f07e8" name="gae58e5739871cecf396064a8a586f07e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae58e5739871cecf396064a8a586f07e8">&#9670;&#160;</a></span>THD_BARRIER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THD_BARRIER_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of a thread barrier, in bytes. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1203e770e99f5d55ed2baf612e6f20c3" name="ga1203e770e99f5d55ed2baf612e6f20c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1203e770e99f5d55ed2baf612e6f20c3">&#9670;&#160;</a></span>thd_barrier_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thd_barrier_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionthd__barrier__t.html">thd_barrier_t</a> *</td>          <td class="paramname"><span class="paramname"><em>barrier</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a thread barrier. </p>
<p>This function destroys a thread barrier, releasing any resources associated with the barrier. Subsequent use of the barrier is results in undefined behavior unless it is later re-initialized with <a class="el" href="#ga9f609418ef571d918feab5d8b22fdaee" title="Initialize a thread barrier.">thd_barrier_init()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barrier</td><td>The barrier to destroy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error code on failure</dd></dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>EBUSY</em> - A destroy operation is already in progress on barrier <br  />
<em>EINVAL</em> - NULL was passed for barrier <br  />
<em>EINVAL</em> - An already destroyed barrier was passed in <br  />
<em>EPERM</em> - Function was called in an interrupt context</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function may block if a wait operation is currently in progress on the specified barrier. </dd></dl>

</div>
</div>
<a id="ga9f609418ef571d918feab5d8b22fdaee" name="ga9f609418ef571d918feab5d8b22fdaee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f609418ef571d918feab5d8b22fdaee">&#9670;&#160;</a></span>thd_barrier_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thd_barrier_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionthd__barrier__t.html">thd_barrier_t</a> *<a class="el" href="group__system__compat.html#ga378ac21329d33f561f90265eef89f564">__RESTRICT</a></td>          <td class="paramname"><span class="paramname"><em>barrier</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *<a class="el" href="group__system__compat.html#ga378ac21329d33f561f90265eef89f564">__RESTRICT</a></td>          <td class="paramname"><span class="paramname"><em>attr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned</td>          <td class="paramname"><span class="paramname"><em>count</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a thread barrier. </p>
<p>This function initializes a thread barrier for use among the specified number of threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barrier</td><td>The barrier to initialize. </td></tr>
    <tr><td class="paramname">attr</td><td>Reserved for POSIX compatibility. Always pass NULL. </td></tr>
    <tr><td class="paramname">count</td><td>The number of threads the barrier will expect.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error code on failure</dd></dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>EINVAL</em> - NULL was passed for barrier <br  />
<em>EINVAL</em> - Non-NULL was passed for attr <br  />
<em>EINVAL</em> - count == 0 or count &gt; UINT32_MAX </dd></dl>

</div>
</div>
<a id="ga79ab8ff77d1f4155cb30188c11e8758c" name="ga79ab8ff77d1f4155cb30188c11e8758c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79ab8ff77d1f4155cb30188c11e8758c">&#9670;&#160;</a></span>thd_barrier_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thd_barrier_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionthd__barrier__t.html">thd_barrier_t</a> *</td>          <td class="paramname"><span class="paramname"><em>barrier</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait on a thread barrier. </p>
<p>This function synchronizes the participating threads at the barrier specified. The calling thread will block until the required number of threads (specified by the barrier's count) have called this function to wait on the barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barrier</td><td>The barrier to wait on.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 or THD_BARRIER_SERIAL_THREAD on success, non-zero error code on failure</dd></dl>
<dl class="section user"><dt>Error Conditions:</dt><dd><em>EINVAL</em> - NULL was passed for barrier <br  />
<em>EINVAL</em> - barrier was destroyed via <a class="el" href="#ga1203e770e99f5d55ed2baf612e6f20c3" title="Destroy a thread barrier.">thd_barrier_destroy()</a> <br  />
<em>EINVAL</em> - A call to <a class="el" href="#ga1203e770e99f5d55ed2baf612e6f20c3" title="Destroy a thread barrier.">thd_barrier_destroy()</a> is in progress for the specified barrier <br  />
<em>EPERM</em> - Function was called in an interrupt context </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
