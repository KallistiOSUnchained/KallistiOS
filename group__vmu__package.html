<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KallistiOS: Header Package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KallistiOS<span id="projectnumber">&#160;git master</span>
   </div>
   <div id="projectbrief">Independent SDK for the Sega Dreamcast</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__vmu__package.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Topics</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Header Package<div class="ingroups"><a class="el" href="group__peripherals.html">Peripherals</a> &raquo; <a class="el" href="group__vmu.html">Visual Memory Unit</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>API for Managing VMU File Headers  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__vmu__ectype.html">Eyecatch Types</a></td></tr>
<tr class="memdesc:group__vmu__ectype"><td class="mdescLeft">&#160;</td><td class="mdescRight">Values for various VMU eyecatch formats <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmu__pkg_8h.html">vmu_pkg.h</a></td></tr>
<tr class="memdesc:vmu__pkg_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">VMU Packaging functionality. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvmu__pkg__t.html">vmu_pkg_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">VMU Package type.  <a href="structvmu__pkg__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvmu__hdr__t.html">vmu_hdr_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Final VMU package type.  <a href="structvmu__hdr__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga80053b490bc194a98a89acf91d27c984" id="r_ga80053b490bc194a98a89acf91d27c984"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga80053b490bc194a98a89acf91d27c984">vmu_pkg_build</a> (<a class="el" href="structvmu__pkg__t.html">vmu_pkg_t</a> *src, uint8_t **dst, int *dst_size)</td></tr>
<tr class="memdesc:ga80053b490bc194a98a89acf91d27c984"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a> into an array of uint8s.  <br /></td></tr>
<tr class="separator:ga80053b490bc194a98a89acf91d27c984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6c2afd0530588c0c86efbc66a348eb8" id="r_gaf6c2afd0530588c0c86efbc66a348eb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf6c2afd0530588c0c86efbc66a348eb8">vmu_pkg_parse</a> (uint8_t *data, size_t data_size, <a class="el" href="structvmu__pkg__t.html">vmu_pkg_t</a> *pkg)</td></tr>
<tr class="memdesc:gaf6c2afd0530588c0c86efbc66a348eb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse an array of uint8s into a <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a>.  <br /></td></tr>
<tr class="separator:gaf6c2afd0530588c0c86efbc66a348eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76ef47c910340f550a75b074a3d30b0b" id="r_ga76ef47c910340f550a75b074a3d30b0b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga76ef47c910340f550a75b074a3d30b0b">vmu_pkg_load_icon</a> (<a class="el" href="structvmu__pkg__t.html">vmu_pkg_t</a> *pkg, const char *icon_fn)</td></tr>
<tr class="memdesc:ga76ef47c910340f550a75b074a3d30b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a .ico file to use as a VMU file's icon.  <br /></td></tr>
<tr class="separator:ga76ef47c910340f550a75b074a3d30b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API for Managing VMU File Headers </p>
<p>This API is provided as a utility for easy management of VMS file headers. These headers must be present on every file saved within the VMU's filesystem for both the Dreamcast and VMU's BIOS to detect them properly. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga80053b490bc194a98a89acf91d27c984" name="ga80053b490bc194a98a89acf91d27c984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80053b490bc194a98a89acf91d27c984">&#9670;&#160;</a></span>vmu_pkg_build()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vmu_pkg_build </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvmu__pkg__t.html">vmu_pkg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>src</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **</td>          <td class="paramname"><span class="paramname"><em>dst</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>dst_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a> into an array of uint8s. </p>
<p>This function converts a <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a> structure into an array of uint8's which may be written to a VMU file via fs_vmu, or whatever.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>The <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a> to convert. </td></tr>
    <tr><td class="paramname">dst</td><td>The buffer (will be allocated for you). </td></tr>
    <tr><td class="paramname">dst_size</td><td>The size of the output. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, &lt;0 on failure. </dd></dl>

</div>
</div>
<a id="ga76ef47c910340f550a75b074a3d30b0b" name="ga76ef47c910340f550a75b074a3d30b0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76ef47c910340f550a75b074a3d30b0b">&#9670;&#160;</a></span>vmu_pkg_load_icon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vmu_pkg_load_icon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvmu__pkg__t.html">vmu_pkg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pkg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>icon_fn</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a .ico file to use as a VMU file's icon. </p>
<p>Icon files must be in the ICO file format, be 32x32 in size, contain a bitmap (no PNG or compressed BMP), and use paletted 4bpp. They can contain more than one frame, and they can use up to 16 colors if transparency is not used, or 15 colors otherwise. Finally, all frames must use the same palette.</p>
<p>This function assumes that the <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a> has been properly initialized; in particular, the .icon_cnt must be set, and the .icon_data must point to a valid buffer (of 512 bytes per frame).</p>
<p>If the .ico file contains more frames than requested, only the first ones are loaded. If it contains less frames than requested, the .icon_cnt field will be updated to the new frame count.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkg</td><td>A pointer a pre-initialized <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a> </td></tr>
    <tr><td class="paramname">icon_fn</td><td>The file path to the .ico file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>If the .ico file cannot be loaded. </td></tr>
    <tr><td class="paramname">0</td><td>On success. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf6c2afd0530588c0c86efbc66a348eb8" name="gaf6c2afd0530588c0c86efbc66a348eb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6c2afd0530588c0c86efbc66a348eb8">&#9670;&#160;</a></span>vmu_pkg_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vmu_pkg_parse </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>data_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvmu__pkg__t.html">vmu_pkg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pkg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse an array of uint8s into a <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a>. </p>
<p>This function does the opposite of vmu_pkg_build and is used to parse VMU files read in.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The buffer to parse. </td></tr>
    <tr><td class="paramname">data_size</td><td>The size of the buffer, in bytes. </td></tr>
    <tr><td class="paramname">pkg</td><td>Where to store the <a class="el" href="structvmu__pkg__t.html" title="VMU Package type.">vmu_pkg_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>On invalid CRC in the data. </td></tr>
    <tr><td class="paramname">0</td><td>On success. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
